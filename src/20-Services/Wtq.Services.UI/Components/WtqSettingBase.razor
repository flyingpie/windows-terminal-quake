@using System.Linq.Expressions

@typeparam TProperty

@code {

	[EditorRequired]
	[Parameter]
	public Expression<Func<object?>> Get { get; set; }

	[EditorRequired]
	[Parameter]
	public Action<TProperty?> Set { get; set; }

	[Parameter]
	public Func<object?>? Default { get; set; }

	protected TProperty Value
	{
		get
		{
			var r = Get.Compile()();
			if (r != null)
			{
				return (TProperty)r;
			}

			if (Default == null)
			{
				return default;
			}

			var b = Default();
			if (b != null)
			{
				return (TProperty?)b;
			}

			return default;
		}
		set { Set(value); }
	}

}